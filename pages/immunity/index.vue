<template>
  <div>
    <VPageHeading button to="/">Иммунитет</VPageHeading>
    <CategoryItem
      v-for="(category, index) in cats.sort((a,b) => a.id >= b.id ? 1 : -1)"
      :key="category.id"
      :category="category"
      :svgWidth="index === 0 && 50"
    ></CategoryItem>
    <div class="tutor">
      <VPageHeading level="3">Для вас несет службу</VPageHeading>
      <div class="tutor__info">
        <div class="tutor__info__avatar__wrapper">
          <img
            class="tutor__info__avatar"
            src="/images/avatars/politruk.jpg"
            alt="Аватарка тренера"
          />
        </div>
        <div>
          <VP class="tutor__info__title">
            Титков Евгений
          </VP>
          <VP color="var(--grey-light3)">
            Организатор и практик оздоровительных проектов. Опыт 6 лет.
          </VP>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import CategoryItem from '../../components/pages/workout/index/CategoryItem'

export default {
  middleware: 'requireSub',
  components: { CategoryItem },
  data() {
    return {
      categories: [
        {
          id: 0,
          title: 'Дыхательная гимнастика',
          url: '/immunity/respiratory',
          svg: `<svg width="49" height="59" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M509.9 397.8l-.2-.7-56.9-174.4c-14.8-58-65-89.8-141.3-89.8-8 0-15.7 2.5-22.1 7a10 10 0 00-16.7 7.5l.1 35h-33.6V56.2h33.5v.6a10 10 0 0020 .2l.1-10.7a10 10 0 00-10-10h-53.6a10 10 0 00-10 10v91.4a38.8 38.8 0 00-18.7-4.8c-76.2 0-126.4 31.9-141.3 89.8L2.3 397l-.2.7a59.7 59.7 0 0017.6 60.7 68.2 68.2 0 0046 17.3c8.7 0 17.6-1.5 26.3-4.7a507.6 507.6 0 0155.7-10.3 136.5 136.5 0 0076.2-47c12.9-16 13.8-33.8 14.8-51l.5-8.9v-67.8l16.8-7.7 16.8 7.7v67.8l.6 9c.9 17.1 1.9 35 14.7 51a136.5 136.5 0 0077 47 507 507 0 0155 10.2 77.3 77.3 0 0026.2 4.7c17.2 0 33.6-6 46-17.3a59.7 59.7 0 0017.6-60.7zm-290.7-45l-.5 9c-.8 15.3-1.5 28.5-10.4 39.5-16 19.9-38.9 34-64.6 40-6.4.9-46.9 6.8-58.5 11a51.2 51.2 0 01-52.1-8.6A40.2 40.2 0 0121.5 403l56.8-174.4.2-.7c15.8-62 75-75 122-75 5.3 0 10.2 2.1 13.8 6 2.8 3 4.5 6.8 4.9 10.8v22.4a42.8 42.8 0 01-31.8 40.2l-4.2 1a37.8 37.8 0 01-26.5-2.7l-1.8-1a10 10 0 00-14 12.3l9.1 26h-30.3a10 10 0 000 20h37.2l9 25.9v6l-71.2 9.8a10 10 0 102.7 19.8l65-9c-6.2 19-20.4 32-43.3 49.5l-2 1.6a10 10 0 0012.2 15.8l2-1.5c31.9-24.6 54.4-45.4 54.6-90.4v-.3c.8-3.3 3.1-6.1 6.2-7.5l27.1-12.4zm-35.4-63.4c-1.5.7-3 1.5-4.3 2.4l-13.1-37.6c7.3.9 14.7.4 22-1.5l4-1a63 63 0 0045.8-49.3h7.8V261zm82.2-87h7.9a63 63 0 0045.7 49.3l4.1 1a57.8 57.8 0 0022 1.5l-13.1 37.6c-1.4-1-2.8-1.7-4.3-2.4L266 261v-58.6zm213 241.3a51.2 51.2 0 01-52.2 8.6c-11.6-4.2-52-10.1-58.5-11-25.7-6-48.6-20.1-64.6-40-8.8-11-9.5-24.2-10.4-39.5l-.5-9v-57.6l27.2 12.4a10.9 10.9 0 016.1 7.8c.2 45 22.8 65.8 54.6 90.4l2 1.5a10 10 0 0014-1.8 10 10 0 00-1.8-14l-2-1.6c-22.8-17.6-37-30.5-43.2-49.4l64.9 8.9h1.4a10 10 0 001.3-19.8l-71-9.8c-.2-1.6-.2-3.3-.2-5v-1l9-25.8h37.2a10 10 0 000-20H362l9-26a10 10 0 00-13.8-12.3l-2 1a37.8 37.8 0 01-26.4 2.7l-4.2-1.1a42.8 42.8 0 01-31.8-40.1v-22c.3-4.2 2-8.2 5-11.3 3.6-3.9 8.4-6 13.7-6 47 0 106.3 13 122 75l.2.7L490.6 403a40.2 40.2 0 01-11.6 40.7z"/><path d="M280.8 92.5c-4.1.8-7.4 4.2-8 8.4a10 10 0 005.4 10.3 10 10 0 0011.6-1.8c3-3 3.7-7.6 2-11.4a10 10 0 00-11-5.5z"/></svg>`
        },
        {
          id: 1,
          title: 'Советы для ЗОЖ',
          url: '/immunity/tips',
          svg: `<svg  width="58" height="58" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M39.195 36.137c-.625 0-1.133.507-1.133 1.133v7.816a5.67 5.67 0 01-5.664 5.664h-12.23c-.626 0-1.133.507-1.133 1.132l-.002 2.252-2.704-2.703a1.133 1.133 0 00-1.038-.681H7.93a5.67 5.67 0 01-5.664-5.664V27.64a5.67 5.67 0 015.664-5.664H19.37a1.133 1.133 0 000-2.266H7.93C3.557 19.71 0 23.268 0 27.64v17.445c0 4.372 3.557 7.93 7.93 7.93h6.78l4.653 4.652a1.132 1.132 0 001.934-.8l.003-3.852h11.098c4.373 0 7.93-3.558 7.93-7.93V37.27c0-.626-.507-1.133-1.133-1.133z" fill="#000"/><path d="M41.535 0h-2.867C29.59 0 22.203 7.386 22.203 16.465S29.59 32.93 38.668 32.93h2.867c1.417 0 2.82-.18 4.179-.536l4.235 4.233a1.133 1.133 0 001.934-.801v-6.554a16.623 16.623 0 004.328-5.336A16.288 16.288 0 0058 16.465C58 7.386 50.614 0 41.535 0zm8.533 27.814c-.284.215-.45.55-.45.905v4.373l-2.773-2.77a1.133 1.133 0 00-1.133-.282 14.203 14.203 0 01-4.177.624h-2.867c-7.83 0-14.2-6.37-14.2-14.199 0-7.83 6.37-14.2 14.2-14.2h2.867c7.83 0 14.2 6.37 14.2 14.2 0 4.5-2.066 8.638-5.667 11.35z" fill="#000"/><path d="M45.203 12.395a4.807 4.807 0 00-4.447-4.446 4.76 4.76 0 00-3.61 1.278 4.813 4.813 0 00-1.523 3.506 1.133 1.133 0 102.265 0c0-.709.286-1.366.805-1.85a2.532 2.532 0 014.25 1.668 2.52 2.52 0 01-1.968 2.651 2.144 2.144 0 00-1.69 2.102v2.721a1.133 1.133 0 002.266 0v-2.63a4.771 4.771 0 003.652-5zM41.22 23.705a1.141 1.141 0 00-.801-.332c-.298 0-.59.121-.801.332-.21.21-.332.503-.332.801 0 .3.121.591.332.802.21.21.503.331.8.331.299 0 .591-.12.802-.33.21-.213.332-.504.332-.803 0-.298-.122-.59-.332-.8zM31.152 35.117H7.25a1.133 1.133 0 000 2.266h23.902a1.133 1.133 0 100-2.266zM31.953 41.793a1.14 1.14 0 00-.8-.332c-.299 0-.59.121-.802.332a1.14 1.14 0 00-.331.8c0 .299.12.59.331.802.211.21.503.332.801.332.298 0 .59-.122.801-.332.21-.211.332-.502.332-.801 0-.298-.121-.59-.332-.801zM26.697 41.46H7.25a1.133 1.133 0 000 2.267h19.447a1.133 1.133 0 000-2.266zM23.79 28.773H7.25a1.133 1.133 0 000 2.266h16.54a1.133 1.133 0 000-2.266z" fill="#000"/></svg>`
        },
        {
          id: 2,
          title: 'Марафон здоровья',
          url: '/immunity/marathon',
          svg: `<svg width="53" height="53" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 332 332"><path d="M166 0a166 166 0 100 332 166 166 0 000-332zm0 318a152 152 0 110-304 152 152 0 010 304z"/><path d="M252 130h-50V80c0-4-3-8-7-8h-58c-4 0-7 4-7 8v50H80c-4 0-8 3-8 7v58c0 4 4 7 8 7h50v50c0 4 3 8 7 8h58c4 0 7-4 7-8v-50h50c4 0 8-3 8-7v-58c-1-4-4-7-8-7zm-6 58h-51c-4 0-7 3-7 7v50h-44v-50c0-4-3-7-7-7H87v-44h50c4 0 7-3 7-7V87h44v50c0 4 3 7 7 7h51v44z"/></svg>`
        }
      ]
    }
  },
  computed: {
    cats() {
      const curPlan = this.$store.getters['user/GET_USER'].plan_id
      const planIsOk = this.categories.filter(
        item => !item.minPlan || item.minPlan <= curPlan
      )
      const planIsntOk = this.categories
        .filter(item => item.minPlan > curPlan)
        .map(item => {
          return { ...item, planFailed: true }
        })

      return [...planIsOk, ...planIsntOk]
    }
  }
}
</script>

<style scoped>
.tutor {
  margin-top: var(--space);
}

.tutor__info {
  display: flex;
}

.tutor__info > div {
  margin-left: var(--space);
}

.tutor__info__title {
  color: var(--yellow-base);
  text-shadow: 0 0 40px #eff62144;
  font-size: 20px;
  margin-bottom: var(--space-half);
}

.tutor__info__avatar__wrapper {
  display: block;
  max-width: 45%;
  width: min-content;
  margin: 0 !important;
}

.tutor__info__avatar {
  min-width: 118px;
  max-height: 100%;
  max-width: 100%;
  border: 2px solid var(--yellow-base);
  border-radius: 3px;
  box-shadow: 0 -5px 40px -10px #eff62133;
}
</style>
